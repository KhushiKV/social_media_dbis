{"ast":null,"code":"let PRELOADED_CLOUDINARY_PATH, config, utils;\nutils = require(\"./utils\");\nconfig = require(\"./config\");\nPRELOADED_CLOUDINARY_PATH = /^([^\\/]+)\\/([^\\/]+)\\/v(\\d+)\\/([^#]+)#([^\\/]+)$/;\n\nclass PreloadedFile {\n  constructor(file_info) {\n    let matches, public_id_and_format;\n    matches = file_info.match(PRELOADED_CLOUDINARY_PATH);\n\n    if (!matches) {\n      throw \"Invalid preloaded file info\";\n    }\n\n    this.resource_type = matches[1];\n    this.type = matches[2];\n    this.version = matches[3];\n    this.filename = matches[4];\n    this.signature = matches[5];\n    public_id_and_format = PreloadedFile.split_format(this.filename);\n    this.public_id = public_id_and_format[0];\n    this.format = public_id_and_format[1];\n  }\n\n  is_valid() {\n    let expected_signature;\n    expected_signature = utils.api_sign_request({\n      public_id: this.public_id,\n      version: this.version\n    }, config().api_secret);\n    return this.signature === expected_signature;\n  }\n\n  static split_format(identifier) {\n    let format, last_dot, public_id;\n    last_dot = identifier.lastIndexOf(\".\");\n\n    if (last_dot === -1) {\n      return [identifier, null];\n    }\n\n    public_id = identifier.substr(0, last_dot);\n    format = identifier.substr(last_dot + 1);\n    return [public_id, format];\n  }\n\n  identifier() {\n    return `v${this.version}/${this.filename}`;\n  }\n\n  toString() {\n    return `${this.resource_type}/${this.type}/v${this.version}/${this.filename}#${this.signature}`;\n  }\n\n  toJSON() {\n    let result = {};\n    Object.getOwnPropertyNames(this).forEach(key => {\n      let val = this[key];\n\n      if (typeof val !== 'function') {\n        result[key] = val;\n      }\n    });\n    return result;\n  }\n\n}\n\nmodule.exports = PreloadedFile;","map":{"version":3,"names":["PRELOADED_CLOUDINARY_PATH","config","utils","require","PreloadedFile","constructor","file_info","matches","public_id_and_format","match","resource_type","type","version","filename","signature","split_format","public_id","format","is_valid","expected_signature","api_sign_request","api_secret","identifier","last_dot","lastIndexOf","substr","toString","toJSON","result","Object","getOwnPropertyNames","forEach","key","val","module","exports"],"sources":["/Users/abhinavkumar/Desktop/dbms/client/node_modules/cloudinary/lib/preloaded_file.js"],"sourcesContent":["let PRELOADED_CLOUDINARY_PATH, config, utils;\n\nutils = require(\"./utils\");\n\nconfig = require(\"./config\");\n\nPRELOADED_CLOUDINARY_PATH = /^([^\\/]+)\\/([^\\/]+)\\/v(\\d+)\\/([^#]+)#([^\\/]+)$/;\n\nclass PreloadedFile {\n  constructor(file_info) {\n    let matches, public_id_and_format;\n    matches = file_info.match(PRELOADED_CLOUDINARY_PATH);\n    if (!matches) {\n      throw \"Invalid preloaded file info\";\n    }\n    this.resource_type = matches[1];\n    this.type = matches[2];\n    this.version = matches[3];\n    this.filename = matches[4];\n    this.signature = matches[5];\n    public_id_and_format = PreloadedFile.split_format(this.filename);\n    this.public_id = public_id_and_format[0];\n    this.format = public_id_and_format[1];\n  }\n\n  is_valid() {\n    let expected_signature;\n    expected_signature = utils.api_sign_request({\n      public_id: this.public_id,\n      version: this.version\n    }, config().api_secret);\n    return this.signature === expected_signature;\n  }\n\n  static split_format(identifier) {\n    let format, last_dot, public_id;\n    last_dot = identifier.lastIndexOf(\".\");\n    if (last_dot === -1) {\n      return [identifier, null];\n    }\n    public_id = identifier.substr(0, last_dot);\n    format = identifier.substr(last_dot + 1);\n    return [public_id, format];\n  }\n\n  identifier() {\n    return `v${this.version}/${this.filename}`;\n  }\n\n  toString() {\n    return `${this.resource_type}/${this.type}/v${this.version}/${this.filename}#${this.signature}`;\n  }\n\n  toJSON() {\n    let result = {};\n    Object.getOwnPropertyNames(this).forEach((key) => {\n      let val = this[key];\n      if (typeof val !== 'function') {\n        result[key] = val;\n      }\n    });\n    return result;\n  }\n}\n\nmodule.exports = PreloadedFile;\n"],"mappings":"AAAA,IAAIA,yBAAJ,EAA+BC,MAA/B,EAAuCC,KAAvC;AAEAA,KAAK,GAAGC,OAAO,CAAC,SAAD,CAAf;AAEAF,MAAM,GAAGE,OAAO,CAAC,UAAD,CAAhB;AAEAH,yBAAyB,GAAG,gDAA5B;;AAEA,MAAMI,aAAN,CAAoB;EAClBC,WAAW,CAACC,SAAD,EAAY;IACrB,IAAIC,OAAJ,EAAaC,oBAAb;IACAD,OAAO,GAAGD,SAAS,CAACG,KAAV,CAAgBT,yBAAhB,CAAV;;IACA,IAAI,CAACO,OAAL,EAAc;MACZ,MAAM,6BAAN;IACD;;IACD,KAAKG,aAAL,GAAqBH,OAAO,CAAC,CAAD,CAA5B;IACA,KAAKI,IAAL,GAAYJ,OAAO,CAAC,CAAD,CAAnB;IACA,KAAKK,OAAL,GAAeL,OAAO,CAAC,CAAD,CAAtB;IACA,KAAKM,QAAL,GAAgBN,OAAO,CAAC,CAAD,CAAvB;IACA,KAAKO,SAAL,GAAiBP,OAAO,CAAC,CAAD,CAAxB;IACAC,oBAAoB,GAAGJ,aAAa,CAACW,YAAd,CAA2B,KAAKF,QAAhC,CAAvB;IACA,KAAKG,SAAL,GAAiBR,oBAAoB,CAAC,CAAD,CAArC;IACA,KAAKS,MAAL,GAAcT,oBAAoB,CAAC,CAAD,CAAlC;EACD;;EAEDU,QAAQ,GAAG;IACT,IAAIC,kBAAJ;IACAA,kBAAkB,GAAGjB,KAAK,CAACkB,gBAAN,CAAuB;MAC1CJ,SAAS,EAAE,KAAKA,SAD0B;MAE1CJ,OAAO,EAAE,KAAKA;IAF4B,CAAvB,EAGlBX,MAAM,GAAGoB,UAHS,CAArB;IAIA,OAAO,KAAKP,SAAL,KAAmBK,kBAA1B;EACD;;EAEkB,OAAZJ,YAAY,CAACO,UAAD,EAAa;IAC9B,IAAIL,MAAJ,EAAYM,QAAZ,EAAsBP,SAAtB;IACAO,QAAQ,GAAGD,UAAU,CAACE,WAAX,CAAuB,GAAvB,CAAX;;IACA,IAAID,QAAQ,KAAK,CAAC,CAAlB,EAAqB;MACnB,OAAO,CAACD,UAAD,EAAa,IAAb,CAAP;IACD;;IACDN,SAAS,GAAGM,UAAU,CAACG,MAAX,CAAkB,CAAlB,EAAqBF,QAArB,CAAZ;IACAN,MAAM,GAAGK,UAAU,CAACG,MAAX,CAAkBF,QAAQ,GAAG,CAA7B,CAAT;IACA,OAAO,CAACP,SAAD,EAAYC,MAAZ,CAAP;EACD;;EAEDK,UAAU,GAAG;IACX,OAAQ,IAAG,KAAKV,OAAQ,IAAG,KAAKC,QAAS,EAAzC;EACD;;EAEDa,QAAQ,GAAG;IACT,OAAQ,GAAE,KAAKhB,aAAc,IAAG,KAAKC,IAAK,KAAI,KAAKC,OAAQ,IAAG,KAAKC,QAAS,IAAG,KAAKC,SAAU,EAA9F;EACD;;EAEDa,MAAM,GAAG;IACP,IAAIC,MAAM,GAAG,EAAb;IACAC,MAAM,CAACC,mBAAP,CAA2B,IAA3B,EAAiCC,OAAjC,CAA0CC,GAAD,IAAS;MAChD,IAAIC,GAAG,GAAG,KAAKD,GAAL,CAAV;;MACA,IAAI,OAAOC,GAAP,KAAe,UAAnB,EAA+B;QAC7BL,MAAM,CAACI,GAAD,CAAN,GAAcC,GAAd;MACD;IACF,CALD;IAMA,OAAOL,MAAP;EACD;;AAtDiB;;AAyDpBM,MAAM,CAACC,OAAP,GAAiB/B,aAAjB"},"metadata":{},"sourceType":"script"}