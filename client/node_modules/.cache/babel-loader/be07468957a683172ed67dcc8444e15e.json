{"ast":null,"code":"'use strict';\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar api = require('./api');\n\nvar _require = require('../utils'),\n    isEmpty = _require.isEmpty,\n    isNumber = _require.isNumber;\n\nvar Search = function () {\n  function Search() {\n    _classCallCheck(this, Search);\n\n    this.query_hash = {\n      sort_by: [],\n      aggregate: [],\n      with_field: []\n    };\n  }\n\n  _createClass(Search, [{\n    key: 'expression',\n    value: function expression(value) {\n      this.query_hash.expression = value;\n      return this;\n    }\n  }, {\n    key: 'max_results',\n    value: function max_results(value) {\n      this.query_hash.max_results = value;\n      return this;\n    }\n  }, {\n    key: 'next_cursor',\n    value: function next_cursor(value) {\n      this.query_hash.next_cursor = value;\n      return this;\n    }\n  }, {\n    key: 'aggregate',\n    value: function aggregate(value) {\n      var found = this.query_hash.aggregate.find(function (v) {\n        return v === value;\n      });\n\n      if (!found) {\n        this.query_hash.aggregate.push(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'with_field',\n    value: function with_field(value) {\n      var found = this.query_hash.with_field.find(function (v) {\n        return v === value;\n      });\n\n      if (!found) {\n        this.query_hash.with_field.push(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'sort_by',\n    value: function sort_by(field_name) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"desc\";\n      var sort_bucket = void 0;\n      sort_bucket = {};\n      sort_bucket[field_name] = dir; // Check if this field name is already stored in the hash\n\n      var previously_sorted_obj = this.query_hash.sort_by.find(function (sort_by) {\n        return sort_by[field_name];\n      }); // Since objects are references in Javascript, we can update the reference we found\n      // For example,\n\n      if (previously_sorted_obj) {\n        previously_sorted_obj[field_name] = dir;\n      } else {\n        this.query_hash.sort_by.push(sort_bucket);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'to_query',\n    value: function to_query() {\n      var _this = this;\n\n      Object.keys(this.query_hash).forEach(function (k) {\n        var v = _this.query_hash[k];\n\n        if (!isNumber(v) && isEmpty(v)) {\n          delete _this.query_hash[k];\n        }\n      });\n      return this.query_hash;\n    }\n  }, {\n    key: 'execute',\n    value: function execute(options, callback) {\n      if (callback === null) {\n        callback = options;\n      }\n\n      options = options || {};\n      return api.search(this.to_query(), options, callback);\n    }\n  }], [{\n    key: 'instance',\n    value: function instance() {\n      return new Search();\n    }\n  }, {\n    key: 'expression',\n    value: function expression(value) {\n      return this.instance().expression(value);\n    }\n  }, {\n    key: 'max_results',\n    value: function max_results(value) {\n      return this.instance().max_results(value);\n    }\n  }, {\n    key: 'next_cursor',\n    value: function next_cursor(value) {\n      return this.instance().next_cursor(value);\n    }\n  }, {\n    key: 'aggregate',\n    value: function aggregate(value) {\n      return this.instance().aggregate(value);\n    }\n  }, {\n    key: 'with_field',\n    value: function with_field(value) {\n      return this.instance().with_field(value);\n    }\n  }, {\n    key: 'sort_by',\n    value: function sort_by(field_name) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'asc';\n      return this.instance().sort_by(field_name, dir);\n    }\n  }]);\n\n  return Search;\n}();\n\nmodule.exports = Search;","map":{"version":3,"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","api","require","_require","isEmpty","isNumber","Search","query_hash","sort_by","aggregate","with_field","value","expression","max_results","next_cursor","found","find","v","push","field_name","dir","arguments","undefined","sort_bucket","previously_sorted_obj","to_query","_this","keys","forEach","k","execute","options","callback","search","module","exports"],"sources":["/Users/abhinavkumar/Desktop/dbms/client/node_modules/cloudinary/lib-es5/v2/search.js"],"sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar api = require('./api');\n\nvar _require = require('../utils'),\n    isEmpty = _require.isEmpty,\n    isNumber = _require.isNumber;\n\nvar Search = function () {\n  function Search() {\n    _classCallCheck(this, Search);\n\n    this.query_hash = {\n      sort_by: [],\n      aggregate: [],\n      with_field: []\n    };\n  }\n\n  _createClass(Search, [{\n    key: 'expression',\n    value: function expression(value) {\n      this.query_hash.expression = value;\n      return this;\n    }\n  }, {\n    key: 'max_results',\n    value: function max_results(value) {\n      this.query_hash.max_results = value;\n      return this;\n    }\n  }, {\n    key: 'next_cursor',\n    value: function next_cursor(value) {\n      this.query_hash.next_cursor = value;\n      return this;\n    }\n  }, {\n    key: 'aggregate',\n    value: function aggregate(value) {\n      var found = this.query_hash.aggregate.find(function (v) {\n        return v === value;\n      });\n\n      if (!found) {\n        this.query_hash.aggregate.push(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'with_field',\n    value: function with_field(value) {\n      var found = this.query_hash.with_field.find(function (v) {\n        return v === value;\n      });\n\n      if (!found) {\n        this.query_hash.with_field.push(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'sort_by',\n    value: function sort_by(field_name) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"desc\";\n\n      var sort_bucket = void 0;\n      sort_bucket = {};\n      sort_bucket[field_name] = dir;\n\n      // Check if this field name is already stored in the hash\n      var previously_sorted_obj = this.query_hash.sort_by.find(function (sort_by) {\n        return sort_by[field_name];\n      });\n\n      // Since objects are references in Javascript, we can update the reference we found\n      // For example,\n      if (previously_sorted_obj) {\n        previously_sorted_obj[field_name] = dir;\n      } else {\n        this.query_hash.sort_by.push(sort_bucket);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'to_query',\n    value: function to_query() {\n      var _this = this;\n\n      Object.keys(this.query_hash).forEach(function (k) {\n        var v = _this.query_hash[k];\n        if (!isNumber(v) && isEmpty(v)) {\n          delete _this.query_hash[k];\n        }\n      });\n      return this.query_hash;\n    }\n  }, {\n    key: 'execute',\n    value: function execute(options, callback) {\n      if (callback === null) {\n        callback = options;\n      }\n      options = options || {};\n      return api.search(this.to_query(), options, callback);\n    }\n  }], [{\n    key: 'instance',\n    value: function instance() {\n      return new Search();\n    }\n  }, {\n    key: 'expression',\n    value: function expression(value) {\n      return this.instance().expression(value);\n    }\n  }, {\n    key: 'max_results',\n    value: function max_results(value) {\n      return this.instance().max_results(value);\n    }\n  }, {\n    key: 'next_cursor',\n    value: function next_cursor(value) {\n      return this.instance().next_cursor(value);\n    }\n  }, {\n    key: 'aggregate',\n    value: function aggregate(value) {\n      return this.instance().aggregate(value);\n    }\n  }, {\n    key: 'with_field',\n    value: function with_field(value) {\n      return this.instance().with_field(value);\n    }\n  }, {\n    key: 'sort_by',\n    value: function sort_by(field_name) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'asc';\n\n      return this.instance().sort_by(field_name, dir);\n    }\n  }]);\n\n  return Search;\n}();\n\nmodule.exports = Search;"],"mappings":"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"},"metadata":{},"sourceType":"script"}