{"ast":null,"code":"const utils = require('./index');\n\nconst generateBreakpoints = require('./generateBreakpoints');\n\nconst Cache = require('../cache');\n\nconst isEmpty = utils.isEmpty;\n/**\n * Options used to generate the srcset attribute.\n * @typedef {object} srcset\n * @property {(number[]|string[])}   [breakpoints] An array of breakpoints.\n * @property {number}                [min_width]   Minimal width of the srcset images.\n * @property {number}                [max_width]   Maximal width of the srcset images.\n * @property {number}                [max_images]  Number of srcset images to generate.\n * @property {object|string}         [transformation] The transformation to use in the srcset urls.\n * @property {boolean}               [sizes] Whether to calculate and add the sizes attribute.\n */\n\n/**\n * Helper function. Generates a single srcset item url\n *\n * @private\n * @param {string} public_id  Public ID of the resource.\n * @param {number} width      Width in pixels of the srcset item.\n * @param {object|string} transformation\n * @param {object} options    Additional options.\n *\n * @return {string} Resulting URL of the item\n */\n\nfunction scaledUrl(public_id, width, transformation) {\n  let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  let configParams = utils.extractUrlParams(options);\n  transformation = transformation || options;\n  configParams.raw_transformation = utils.generate_transformation_string([utils.extend({}, transformation), {\n    crop: 'scale',\n    width: width\n  }]);\n  return utils.url(public_id, configParams);\n}\n/**\n * If cache is enabled, get the breakpoints from the cache. If the values were not found in the cache,\n * or cache is not enabled, generate the values.\n * @param {srcset} srcset The srcset configuration parameters\n * @param {string} public_id\n * @param {object} options\n * @return {*|Array}\n */\n\n\nfunction getOrGenerateBreakpoints(public_id) {\n  let srcset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let breakpoints = [];\n\n  if (srcset.useCache) {\n    breakpoints = Cache.get(public_id, options);\n\n    if (!breakpoints) {\n      breakpoints = [];\n    }\n  } else {\n    breakpoints = generateBreakpoints(srcset);\n  }\n\n  return breakpoints;\n}\n/**\n * Helper function. Generates srcset attribute value of the HTML img tag\n * @private\n *\n * @param {string} public_id  Public ID of the resource\n * @param {number[]} breakpoints An array of breakpoints (in pixels)\n * @param {object} transformation The transformation\n * @param {object} options Includes html tag options, transformation options\n * @return {string} Resulting srcset attribute value\n */\n\n\nfunction generateSrcsetAttribute(public_id, breakpoints, transformation, options) {\n  options = utils.clone(options);\n  utils.patchFetchFormat(options);\n  return breakpoints.map(width => `${scaledUrl(public_id, width, transformation, options)} ${width}w`).join(', ');\n}\n/**\n * Helper function. Generates sizes attribute value of the HTML img tag\n * @private\n * @param {number[]} breakpoints An array of breakpoints.\n * @return {string} Resulting sizes attribute value\n */\n\n\nfunction generateSizesAttribute() {\n  let breakpoints = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return breakpoints.map(width => `(max-width: ${width}px) ${width}px`).join(', ');\n}\n/**\n * Helper function. Generates srcset and sizes attributes of the image tag\n *\n * Generated attributes are added to attributes argument\n *\n * @private\n * @param {string}    publicId  The public ID of the resource\n * @param {object}    attributes Existing HTML attributes.\n * @param {srcset}    srcsetData\n * @param {object}    options    Additional options.\n *\n * @return array The responsive attributes\n */\n\n\nfunction generateImageResponsiveAttributes(publicId) {\n  let attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let srcsetData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  // Create both srcset and sizes here to avoid fetching breakpoints twice\n  let responsiveAttributes = {};\n\n  if (isEmpty(srcsetData)) {\n    return responsiveAttributes;\n  }\n\n  const generateSizes = !attributes.sizes && srcsetData.sizes === true;\n  const generateSrcset = !attributes.srcset;\n\n  if (generateSrcset || generateSizes) {\n    let breakpoints = getOrGenerateBreakpoints(publicId, srcsetData, options);\n\n    if (generateSrcset) {\n      let transformation = srcsetData.transformation;\n      let srcsetAttr = generateSrcsetAttribute(publicId, breakpoints, transformation, options);\n\n      if (!isEmpty(srcsetAttr)) {\n        responsiveAttributes.srcset = srcsetAttr;\n      }\n    }\n\n    if (generateSizes) {\n      let sizesAttr = generateSizesAttribute(breakpoints);\n\n      if (!isEmpty(sizesAttr)) {\n        responsiveAttributes.sizes = sizesAttr;\n      }\n    }\n  }\n\n  return responsiveAttributes;\n}\n/**\n * Generate a media query\n *\n * @private\n * @param {object} options configuration options\n * @param {number|string} options.min_width\n * @param {number|string} options.max_width\n * @return {string} a media query string\n */\n\n\nfunction generateMediaAttr() {\n  let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let mediaQuery = [];\n\n  if (options.min_width != null) {\n    mediaQuery.push(`(min-width: ${options.min_width}px)`);\n  }\n\n  if (options.max_width != null) {\n    mediaQuery.push(`(max-width: ${options.max_width}px)`);\n  }\n\n  return mediaQuery.join(' and ');\n}\n\nmodule.exports = {\n  srcsetUrl: scaledUrl,\n  generateSrcsetAttribute,\n  generateSizesAttribute,\n  generateMediaAttr,\n  generateImageResponsiveAttributes\n};","map":{"version":3,"names":["utils","require","generateBreakpoints","Cache","isEmpty","scaledUrl","public_id","width","transformation","options","configParams","extractUrlParams","raw_transformation","generate_transformation_string","extend","crop","url","getOrGenerateBreakpoints","srcset","breakpoints","useCache","get","generateSrcsetAttribute","clone","patchFetchFormat","map","join","generateSizesAttribute","generateImageResponsiveAttributes","publicId","attributes","srcsetData","responsiveAttributes","generateSizes","sizes","generateSrcset","srcsetAttr","sizesAttr","generateMediaAttr","mediaQuery","min_width","push","max_width","module","exports","srcsetUrl"],"sources":["/Users/abhinavkumar/Desktop/dbms/client/node_modules/cloudinary/lib/utils/srcsetUtils.js"],"sourcesContent":["\nconst utils = require('./index');\nconst generateBreakpoints = require('./generateBreakpoints');\nconst Cache = require('../cache');\n\nconst isEmpty = utils.isEmpty;\n\n/**\n * Options used to generate the srcset attribute.\n * @typedef {object} srcset\n * @property {(number[]|string[])}   [breakpoints] An array of breakpoints.\n * @property {number}                [min_width]   Minimal width of the srcset images.\n * @property {number}                [max_width]   Maximal width of the srcset images.\n * @property {number}                [max_images]  Number of srcset images to generate.\n * @property {object|string}         [transformation] The transformation to use in the srcset urls.\n * @property {boolean}               [sizes] Whether to calculate and add the sizes attribute.\n */\n\n/**\n * Helper function. Generates a single srcset item url\n *\n * @private\n * @param {string} public_id  Public ID of the resource.\n * @param {number} width      Width in pixels of the srcset item.\n * @param {object|string} transformation\n * @param {object} options    Additional options.\n *\n * @return {string} Resulting URL of the item\n */\nfunction scaledUrl(public_id, width, transformation, options = {}) {\n  let configParams = utils.extractUrlParams(options);\n  transformation = transformation || options;\n  configParams.raw_transformation = utils.generate_transformation_string([utils.extend({}, transformation), { crop: 'scale', width: width }]);\n\n  return utils.url(public_id, configParams);\n}\n\n/**\n * If cache is enabled, get the breakpoints from the cache. If the values were not found in the cache,\n * or cache is not enabled, generate the values.\n * @param {srcset} srcset The srcset configuration parameters\n * @param {string} public_id\n * @param {object} options\n * @return {*|Array}\n */\nfunction getOrGenerateBreakpoints(public_id, srcset = {}, options = {}) {\n  let breakpoints = [];\n  if (srcset.useCache) {\n    breakpoints = Cache.get(public_id, options);\n    if (!breakpoints) {\n      breakpoints = [];\n    }\n  } else {\n    breakpoints = generateBreakpoints(srcset);\n  }\n  return breakpoints;\n}\n\n/**\n * Helper function. Generates srcset attribute value of the HTML img tag\n * @private\n *\n * @param {string} public_id  Public ID of the resource\n * @param {number[]} breakpoints An array of breakpoints (in pixels)\n * @param {object} transformation The transformation\n * @param {object} options Includes html tag options, transformation options\n * @return {string} Resulting srcset attribute value\n */\nfunction generateSrcsetAttribute(public_id, breakpoints, transformation, options) {\n  options = utils.clone(options);\n  utils.patchFetchFormat(options);\n  return breakpoints.map(width => `${scaledUrl(public_id, width, transformation, options)} ${width}w`).join(', ');\n}\n\n/**\n * Helper function. Generates sizes attribute value of the HTML img tag\n * @private\n * @param {number[]} breakpoints An array of breakpoints.\n * @return {string} Resulting sizes attribute value\n */\nfunction generateSizesAttribute(breakpoints = []) {\n  return breakpoints.map(width => `(max-width: ${width}px) ${width}px`).join(', ');\n}\n\n/**\n * Helper function. Generates srcset and sizes attributes of the image tag\n *\n * Generated attributes are added to attributes argument\n *\n * @private\n * @param {string}    publicId  The public ID of the resource\n * @param {object}    attributes Existing HTML attributes.\n * @param {srcset}    srcsetData\n * @param {object}    options    Additional options.\n *\n * @return array The responsive attributes\n */\nfunction generateImageResponsiveAttributes(publicId, attributes = {}, srcsetData = {}, options = {}) {\n  // Create both srcset and sizes here to avoid fetching breakpoints twice\n\n  let responsiveAttributes = {};\n  if (isEmpty(srcsetData)) {\n    return responsiveAttributes;\n  }\n\n  const generateSizes = (!attributes.sizes && srcsetData.sizes === true);\n\n  const generateSrcset = !attributes.srcset;\n  if (generateSrcset || generateSizes) {\n    let breakpoints = getOrGenerateBreakpoints(publicId, srcsetData, options);\n\n    if (generateSrcset) {\n      let transformation = srcsetData.transformation;\n      let srcsetAttr = generateSrcsetAttribute(publicId, breakpoints, transformation, options);\n      if (!isEmpty(srcsetAttr)) {\n        responsiveAttributes.srcset = srcsetAttr;\n      }\n    }\n\n    if (generateSizes) {\n      let sizesAttr = generateSizesAttribute(breakpoints);\n      if (!isEmpty(sizesAttr)) {\n        responsiveAttributes.sizes = sizesAttr;\n      }\n    }\n  }\n  return responsiveAttributes;\n}\n\n/**\n * Generate a media query\n *\n * @private\n * @param {object} options configuration options\n * @param {number|string} options.min_width\n * @param {number|string} options.max_width\n * @return {string} a media query string\n */\nfunction generateMediaAttr(options = {}) {\n  let mediaQuery = [];\n  if (options.min_width != null) {\n    mediaQuery.push(`(min-width: ${options.min_width}px)`);\n  }\n  if (options.max_width != null) {\n    mediaQuery.push(`(max-width: ${options.max_width}px)`);\n  }\n  return mediaQuery.join(' and ');\n}\n\nmodule.exports = {\n  srcsetUrl: scaledUrl,\n  generateSrcsetAttribute,\n  generateSizesAttribute,\n  generateMediaAttr,\n  generateImageResponsiveAttributes\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}