{"ast":null,"code":"var _jsxFileName = \"/Users/abhinavkumar/Desktop/dbms/client/src/components/Posts.js\",\n    _s = $RefreshSig$();\n\nimport Axios from \"axios\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport Card from \"react-bootstrap/Card\";\nimport { AppContext } from \"../App\";\nimport Button from \"@mui/material/Button\";\nimport Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport Modal from \"@mui/material/Modal\";\nimport EditForm from \"./EditForm\";\nimport TextareaAutosize from \"@mui/material/TextareaAutosize\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst style = {\n  position: \"absolute\",\n  top: \"50%\",\n  left: \"50%\",\n  transform: \"translate(-50%, -50%)\",\n  width: 400,\n  bgcolor: \"background.paper\",\n  border: \"2px solid #000\",\n  boxShadow: 24,\n  p: 4\n};\n\nfunction Posts(props) {\n  _s();\n\n  const {\n    user\n  } = useContext(AppContext);\n  let id;\n\n  if (props.user_id === undefined) {\n    id = user.id;\n  } else id = props.user_id;\n\n  const [posts, setPosts] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [postEdit, setPostEdit] = useState({});\n  const [editContent, setEditContent] = useState(\"\");\n\n  const handleOpen = post => {\n    setOpen(true);\n    setPostEdit(post);\n    setEditContent(post.post_content);\n  };\n\n  const handleClose = () => setOpen(false);\n\n  const deletePost = postId => {\n    console.log(postId);\n    Axios.get(`http://localhost:3001/delete/post/${postId}`).then(response => {\n      console.log(response);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const editPost = e => {\n    Axios.post(`http://localhost:3001/edit/post/${postEdit.id}`, {\n      post_content: editContent\n    }).then(response => {\n      console.log(response);\n    }).catch(err => {\n      console.log(err);\n    });\n    handleClose();\n  };\n\n  const editContentHandler = e => {\n    setEditContent(e.target.value);\n  };\n\n  useEffect(() => {\n    Axios.get(`http://localhost:3001/posts/${id}`).then(response => {\n      setPosts(response.data);\n    });\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: posts.slice(0).reverse().map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto text-left md:w-1/2 md:min-h-10 md:max-h-50 outline mb-10 p-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container mx-auto md:w-full md:h-1/2 mb-3\",\n          children: post.post_img && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `${post.post_img}`,\n            className: \"image w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container mx-auto mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa-regular fa-heart fa-2xl space-x-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa-regular fa-comment fa-2xl space-x-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fa-regular fa-comment fa-2xl space-x-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container mx-auto md:h-1/2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.post_content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this), (props.user_id !== undefined && user.id === props.user_id || props.user_id === undefined) && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              color: \"error\",\n              onClick: deletePost.bind(this, post.id),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              color: \"success\",\n              onClick: handleOpen.bind(this, post),\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Modal, {\n              open: open,\n              onClose: handleClose,\n              \"aria-labelledby\": \"modal-modal-title\",\n              \"aria-describedby\": \"modal-modal-description\",\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                sx: style,\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  id: \"modal-modal-title\",\n                  variant: \"h6\",\n                  component: \"h2\",\n                  children: \"Edit Post\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  id: \"modal-modal-description\",\n                  sx: {\n                    mt: 2\n                  },\n                  children: /*#__PURE__*/_jsxDEV(TextareaAutosize, {\n                    maxRows: 10,\n                    \"aria-label\": \"maximum height\",\n                    placeholder: \"Maximum 10 rows\",\n                    value: editContent,\n                    onChange: editContentHandler,\n                    style: {\n                      width: \"100%\",\n                      height: 200\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  color: \"success\",\n                  onClick: editPost,\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }, this))\n  }, void 0, false);\n}\n\n_s(Posts, \"JaA2uznmYPiyp40Ix0vQotoy/Wk=\");\n\n_c = Posts;\nexport default Posts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"names":["Axios","React","useContext","useEffect","useState","Card","AppContext","Button","Box","Typography","Modal","EditForm","TextareaAutosize","style","position","top","left","transform","width","bgcolor","border","boxShadow","p","Posts","props","user","id","user_id","undefined","posts","setPosts","open","setOpen","postEdit","setPostEdit","editContent","setEditContent","handleOpen","post","post_content","handleClose","deletePost","postId","console","log","get","then","response","catch","err","editPost","e","editContentHandler","target","value","data","slice","reverse","map","post_img","bind","mt","height"],"sources":["/Users/abhinavkumar/Desktop/dbms/client/src/components/Posts.js"],"sourcesContent":["import Axios from \"axios\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport Card from \"react-bootstrap/Card\";\nimport { AppContext } from \"../App\";\nimport Button from \"@mui/material/Button\";\nimport Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport Modal from \"@mui/material/Modal\";\nimport EditForm from \"./EditForm\";\nimport TextareaAutosize from \"@mui/material/TextareaAutosize\";\n\nconst style = {\n  position: \"absolute\",\n  top: \"50%\",\n  left: \"50%\",\n  transform: \"translate(-50%, -50%)\",\n  width: 400,\n  bgcolor: \"background.paper\",\n  border: \"2px solid #000\",\n  boxShadow: 24,\n  p: 4,\n};\n\nfunction Posts(props) {\n  const { user } = useContext(AppContext);\n  let id;\n  if (props.user_id === undefined) {\n    id = user.id;\n  } else id = props.user_id;\n\n  const [posts, setPosts] = useState([]);\n\n  const [open, setOpen] = useState(false);\n  const [postEdit, setPostEdit] = useState({});\n  const [editContent, setEditContent] = useState(\"\");\n  const handleOpen = (post) => {\n    setOpen(true);\n    setPostEdit(post);\n    setEditContent(post.post_content);\n  };\n  const handleClose = () => setOpen(false);\n  const deletePost = (postId) => {\n    console.log(postId);\n    Axios.get(`http://localhost:3001/delete/post/${postId}`)\n      .then((response) => {\n        console.log(response);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  const editPost = (e) => {\n    Axios.post(`http://localhost:3001/edit/post/${postEdit.id}`, {\n      post_content: editContent,\n    })\n      .then((response) => {\n        console.log(response);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    handleClose();\n  };\n\n  const editContentHandler = (e) => {\n    setEditContent(e.target.value);\n  };\n  useEffect(() => {\n    Axios.get(`http://localhost:3001/posts/${id}`).then((response) => {\n      setPosts(response.data);\n    });\n  });\n\n  return (\n    <>\n      {posts\n        .slice(0)\n        .reverse()\n        .map((post) => (\n          <div>\n            <div className=\"container mx-auto text-left md:w-1/2 md:min-h-10 md:max-h-50 outline mb-10 p-2\">\n              <div className=\"container mx-auto md:w-full md:h-1/2 mb-3\">\n                {post.post_img && (\n                  <img src={`${post.post_img}`} className=\"image w-full\"></img>\n                )}\n              </div>\n              <div className=\"container mx-auto mb-3\">\n                <div>\n                  <i class=\"fa-regular fa-heart fa-2xl space-x-2\"></i>\n                </div>\n                <div>\n                  <i class=\"fa-regular fa-comment fa-2xl space-x-2\"></i>\n                </div>\n\n                <i class=\"fa-regular fa-comment fa-2xl space-x-2\"></i>\n              </div>\n              <div className=\"container mx-auto md:h-1/2\">\n                <p>{post.post_content}</p>\n                {((props.user_id !== undefined && user.id === props.user_id) ||\n                  props.user_id === undefined) && (\n                  <div>\n                    <Button\n                      variant=\"outlined\"\n                      color=\"error\"\n                      onClick={deletePost.bind(this, post.id)}\n                    >\n                      Delete\n                    </Button>\n                    <Button\n                      variant=\"outlined\"\n                      color=\"success\"\n                      onClick={handleOpen.bind(this, post)}\n                    >\n                      Edit\n                    </Button>\n                    <Modal\n                      open={open}\n                      onClose={handleClose}\n                      aria-labelledby=\"modal-modal-title\"\n                      aria-describedby=\"modal-modal-description\"\n                    >\n                      <Box sx={style}>\n                        <Typography\n                          id=\"modal-modal-title\"\n                          variant=\"h6\"\n                          component=\"h2\"\n                        >\n                          Edit Post\n                        </Typography>\n                        <Typography id=\"modal-modal-description\" sx={{ mt: 2 }}>\n                          <TextareaAutosize\n                            maxRows={10}\n                            aria-label=\"maximum height\"\n                            placeholder=\"Maximum 10 rows\"\n                            value={editContent}\n                            onChange={editContentHandler}\n                            style={{ width: \"100%\", height: 200 }}\n                          />\n                        </Typography>\n                        <Button\n                          variant=\"outlined\"\n                          color=\"success\"\n                          onClick={editPost}\n                        >\n                          Edit\n                        </Button>\n                      </Box>\n                    </Modal>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        ))}\n    </>\n  );\n}\n\nexport default Posts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}