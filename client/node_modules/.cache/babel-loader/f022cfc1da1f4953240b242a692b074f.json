{"ast":null,"code":"var _jsxFileName = \"/Users/abhinavkumar/Desktop/dbms/client/src/components/InputPost.js\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport TextareaAutosize from \"@mui/material/TextareaAutosize\";\nimport { height } from \"@mui/system\";\nimport Button from \"@mui/material/Button\";\nimport { useState } from \"react\";\nimport Axios from \"axios\";\nimport cloudinary from \"cloudinary/lib/cloudinary\";\nimport { data } from \"autoprefixer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\ncloudinary.config({\n  cloud_name: \"abhi9av\",\n  api_key: \"828325979897982\",\n  api_secret: \"FkqFjnAtZDqEAgQn4v4SI-19W4s\"\n});\nexport default function InputPost() {\n  _s();\n\n  Axios.defaults.withCredentials = true;\n  const [image, setImage] = useState(\"\");\n  const [post, setPost] = useState(\"\");\n  const [imageData, setImageData] = useState({\n    url: \"\",\n    public_id: \"\"\n  });\n\n  const postHandler = e => {\n    setPost(e.target.value);\n  };\n\n  const imageHandler = e => {\n    setImage(e.target.files[0]);\n  };\n\n  let imgUrl = \"\";\n\n  const uploadImage = async image => {\n    const formData = new FormData();\n    console.log(image);\n    formData.append(\"file\", image);\n    formData.append(\"upload_preset\", \"g330on9r\");\n    formData.append(\"cloud_name\", \"abhi9av\"); // formData.append(\"public_id\", uniq);\n\n    try {\n      const resp = Axios.post(`https://api.cloudinary.com/v1_1/abhi9av/image/upload`, data);\n      setImageData({\n        url: resp.data.secure_url,\n        public_id: resp.data.public_id\n      });\n    } catch {}\n\n    await fetch(\"https://api.cloudinary.com/v1_1/abhi9av/image/upload\", {\n      method: \"post\",\n      body: formData\n    }).then(response => response.json()).then(async data => {\n      // imgUrl = data.secure_url;\n      // return data.secure_url;\n      imgUrl = data.secure_url;\n      setImageUrl(imgUrl); // console.log(imageUrl);\n\n      console.log(data.secure_url);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const savePost = async () => {\n    if (image !== \"\") {\n      await uploadImage(image);\n    }\n\n    console.log(imageUrl);\n    console.log(imgUrl);\n    await Axios.post(\"http://localhost:3001/post\", {\n      post_content: post,\n      post_img: imgUrl\n    }).then(response => {\n      console.log(response);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TextareaAutosize, {\n      maxRows: 10,\n      \"aria-label\": \"maximum height\",\n      placeholder: \"Maximum 10 rows\",\n      defaultValue: \"\",\n      style: {\n        width: 1000,\n        height: 200\n      },\n      onChange: postHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: imageHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"success\",\n      onClick: savePost,\n      children: \"Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(InputPost, \"0rvKIu/cgd4fcVq9yREXtG4jiAY=\");\n\n_c = InputPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"InputPost\");","map":{"version":3,"names":["React","TextareaAutosize","height","Button","useState","Axios","cloudinary","data","config","cloud_name","api_key","api_secret","InputPost","defaults","withCredentials","image","setImage","post","setPost","imageData","setImageData","url","public_id","postHandler","e","target","value","imageHandler","files","imgUrl","uploadImage","formData","FormData","console","log","append","resp","secure_url","fetch","method","body","then","response","json","setImageUrl","catch","err","savePost","imageUrl","post_content","post_img","width"],"sources":["/Users/abhinavkumar/Desktop/dbms/client/src/components/InputPost.js"],"sourcesContent":["import * as React from \"react\";\nimport TextareaAutosize from \"@mui/material/TextareaAutosize\";\nimport { height } from \"@mui/system\";\nimport Button from \"@mui/material/Button\";\nimport { useState } from \"react\";\nimport Axios from \"axios\";\nimport cloudinary from \"cloudinary/lib/cloudinary\";\nimport { data } from \"autoprefixer\";\n\ncloudinary.config({\n  cloud_name: \"abhi9av\",\n  api_key: \"828325979897982\",\n  api_secret: \"FkqFjnAtZDqEAgQn4v4SI-19W4s\",\n});\n\nexport default function InputPost() {\n  Axios.defaults.withCredentials = true;\n  const [image, setImage] = useState(\"\");\n  const [post, setPost] = useState(\"\");\n  const [imageData, setImageData] = useState({url: \"\", public_id: \"\"});\n  const postHandler = (e) => {\n    setPost(e.target.value);\n  };\n  const imageHandler = (e) => {\n    setImage(e.target.files[0]);\n  };\n  let imgUrl = \"\";\n\n  const uploadImage = async (image) => {\n    const formData = new FormData();\n    console.log(image);\n    formData.append(\"file\", image);\n    formData.append(\"upload_preset\", \"g330on9r\");\n    formData.append(\"cloud_name\", \"abhi9av\");\n    // formData.append(\"public_id\", uniq);\n    try{\n      const resp = Axios.post(`https://api.cloudinary.com/v1_1/abhi9av/image/upload`, data);\n      setImageData({url: resp.data.secure_url, public_id: resp.data.public_id})\n    }\n    catch{\n      \n    }\n    \n\n    await fetch(\"https://api.cloudinary.com/v1_1/abhi9av/image/upload\", {\n      method: \"post\",\n      body: formData,\n    })\n      .then((response) => response.json())\n      .then(async (data) => {\n        // imgUrl = data.secure_url;\n        // return data.secure_url;\n\n        imgUrl = data.secure_url;\n        setImageUrl(imgUrl);\n        // console.log(imageUrl);\n        console.log(data.secure_url);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  const savePost = async () => {\n    if (image !== \"\") {\n      await uploadImage(image);\n    }\n    console.log(imageUrl);\n    console.log(imgUrl);\n    await Axios.post(\"http://localhost:3001/post\", {\n      post_content: post,\n      post_img: imgUrl,\n    })\n      .then((response) => {\n        console.log(response);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  return (\n    <>\n      <TextareaAutosize\n        maxRows={10}\n        aria-label=\"maximum height\"\n        placeholder=\"Maximum 10 rows\"\n        defaultValue=\"\"\n        style={{ width: 1000, height: 200 }}\n        onChange={postHandler}\n      />\n      <input type=\"file\" onChange={imageHandler}></input>\n      <Button variant=\"contained\" color=\"success\" onClick={savePost}>\n        Post\n      </Button>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}